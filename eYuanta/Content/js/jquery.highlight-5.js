jQuery.fn.highlight = function (e) { return this.length && e && e.length ? this.each(function () { !function e(t, i) { var n = 0; if (3 == t.nodeType) { var h = t.data.toUpperCase().indexOf(i); if (0 <= (h -= t.data.substr(0, h).toUpperCase().length - t.data.substr(0, h).length)) { var r = document.createElement("span"); r.className = "color_hl"; var a = t.splitText(h), s = (a.splitText(i.length), a.cloneNode(!0)); r.appendChild(s), a.parentNode.replaceChild(r, a), n = 1 } } else if (1 == t.nodeType && t.childNodes && !/(script|style)/i.test(t.tagName)) for (var l = 0; l < t.childNodes.length; ++l) l += e(t.childNodes[l], i); return n }(this, e.toUpperCase()) }) : this }, jQuery.fn.removeHighlight = function () { return this.find("span.color_hl").each(function () { with (this.parentNode.firstChild.nodeName, this.parentNode) replaceChild(this.firstChild, this), normalize() }).end() };